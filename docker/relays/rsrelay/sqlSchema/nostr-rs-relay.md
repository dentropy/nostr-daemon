<!--

classDiagram
class account{
 *TEXT pubkey
   INTEGER balance NOT NULL
   INTEGER is_admitted NOT NULL
   INTEGER tos_accepted_at
}
class event{
 *INTEGER id
   BLOB author NOT NULL
   TEXT content NOT NULL
   INTEGER created_at NOT NULL
   BLOB delegated_by
   BLOB event_hash NOT NULL
   INTEGER expires_at
   INTEGER first_seen NOT NULL
   INTEGER hidden
   INTEGER kind NOT NULL
}
class invoice{
 *TEXT payment_hash
   INTEGER amount NOT NULL
   INTEGER confirmed_at
   INTEGER created_at NOT NULL
   TEXT description
   TEXT invoice NOT NULL
   TEXT pubkey NOT NULL
   TEXT status NOT NULL
}
class tag{
 *INTEGER id
   INTEGER created_at NOT NULL
   INTEGER event_id NOT NULL
   INTEGER kind NOT NULL
   TEXT name
   TEXT value
   BLOB value_hex
}
class user_verification{
 *INTEGER id
   INTEGER failed_at
   INTEGER failure_count
   INTEGER metadata_event NOT NULL
   TEXT name NOT NULL
   INTEGER verified_at
}
account "1" -- "0..n" invoice
event "1" -- "0..n" tag
event "1" -- "0..n" user_verification

-->
![](https://mermaid.ink/img/Y2xhc3NEaWFncmFtCmNsYXNzIGFjY291bnR7CiAqVEVYVCBwdWJrZXkKICAgSU5URUdFUiBiYWxhbmNlIE5PVCBOVUxMCiAgIElOVEVHRVIgaXNfYWRtaXR0ZWQgTk9UIE5VTEwKICAgSU5URUdFUiB0b3NfYWNjZXB0ZWRfYXQKfQpjbGFzcyBldmVudHsKICpJTlRFR0VSIGlkCiAgIEJMT0IgYXV0aG9yIE5PVCBOVUxMCiAgIFRFWFQgY29udGVudCBOT1QgTlVMTAogICBJTlRFR0VSIGNyZWF0ZWRfYXQgTk9UIE5VTEwKICAgQkxPQiBkZWxlZ2F0ZWRfYnkKICAgQkxPQiBldmVudF9oYXNoIE5PVCBOVUxMCiAgIElOVEVHRVIgZXhwaXJlc19hdAogICBJTlRFR0VSIGZpcnN0X3NlZW4gTk9UIE5VTEwKICAgSU5URUdFUiBoaWRkZW4KICAgSU5URUdFUiBraW5kIE5PVCBOVUxMCn0KY2xhc3MgaW52b2ljZXsKICpURVhUIHBheW1lbnRfaGFzaAogICBJTlRFR0VSIGFtb3VudCBOT1QgTlVMTAogICBJTlRFR0VSIGNvbmZpcm1lZF9hdAogICBJTlRFR0VSIGNyZWF0ZWRfYXQgTk9UIE5VTEwKICAgVEVYVCBkZXNjcmlwdGlvbgogICBURVhUIGludm9pY2UgTk9UIE5VTEwKICAgVEVYVCBwdWJrZXkgTk9UIE5VTEwKICAgVEVYVCBzdGF0dXMgTk9UIE5VTEwKfQpjbGFzcyB0YWd7CiAqSU5URUdFUiBpZAogICBJTlRFR0VSIGNyZWF0ZWRfYXQgTk9UIE5VTEwKICAgSU5URUdFUiBldmVudF9pZCBOT1QgTlVMTAogICBJTlRFR0VSIGtpbmQgTk9UIE5VTEwKICAgVEVYVCBuYW1lCiAgIFRFWFQgdmFsdWUKICAgQkxPQiB2YWx1ZV9oZXgKfQpjbGFzcyB1c2VyX3ZlcmlmaWNhdGlvbnsKICpJTlRFR0VSIGlkCiAgIElOVEVHRVIgZmFpbGVkX2F0CiAgIElOVEVHRVIgZmFpbHVyZV9jb3VudAogICBJTlRFR0VSIG1ldGFkYXRhX2V2ZW50IE5PVCBOVUxMCiAgIFRFWFQgbmFtZSBOT1QgTlVMTAogICBJTlRFR0VSIHZlcmlmaWVkX2F0Cn0KYWNjb3VudCAiMSIgLS0gIjAuLm4iIGludm9pY2UKZXZlbnQgIjEiIC0tICIwLi5uIiB0YWcKZXZlbnQgIjEiIC0tICIwLi5uIiB1c2VyX3ZlcmlmaWNhdGlvbg==)
